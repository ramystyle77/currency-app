const currencies = [
  "ILS","USD","EUR","GBP","JOD","EGP","SAR","AED","QAR",
  "KWD","TRY","CAD","AUD","JPY","CNY","CHF"
];

const fromSelect = document.getElementById("from");
const toSelect = document.getElementById("to");
const resultDiv = document.getElementById("result");

// تعبئة القوائم
currencies.forEach(cur => {
  fromSelect.innerHTML += `<option value="${cur}">${cur}</option>`;
  toSelect.innerHTML += `<option value="${cur}">${cur}</option>`;
});

fromSelect.value = "ILS";
toSelect.value = "USD";

function convert() {
  const amount = document.getElementById("amount").value;
  const from = fromSelect.value;
  const to = toSelect.value;

  if (!amount) {
    resultDiv.style.color = "#ff4444";
    resultDiv.innerText = "⚠️ أدخل المبلغ أولاً";
    return;
  }

  resultDiv.style.color = "#00fff0";
  resultDiv.innerText = "⏳ جاري التحويل...";

  fetch(`https://open.er-api.com/v6/latest/${from}`)
    .then(res => res.json())
    .then(data => {
      const rate = data.rates[to];
      const converted = (amount * rate).toFixed(2);
      
      // النتيجة بنمط نيون أخضر
      resultDiv.innerHTML = `
        <div style="color: #00ff99; text-shadow: 0 0 10px #00ff99;">
          ${amount} ${from} = ${converted} ${to}
        </div>`;
    })
    .catch(() => {
      resultDiv.style.color = "#ff4444";
      resultDiv.innerText = "❌ خطأ في الاتصال";
    });
}
